<!DOCTYPE html>
<html lang="en">
<head th:replace="base::head"></head>
<body th:fragment="section">
<h1>Dados Criptografados do Usuário</h1>

<!-- Formulário para buscar pelo username -->
<form action="/cripto" method="get">
    <label for="username">Nome de Usuário:</label>
    <input type="text" id="username" name="username" value="${username}" required>
    <button type="submit">Buscar</button>
</form>

<!-- Verifica se há dados para exibir -->
<div th:if="${userData != null}">
    <h2>Resultados para "<span th:text="${username}"></span>"</h2>
    <ul>
        <!-- Exibe cada item da lista userData -->
        <li th:each="item : ${userData}">
            ID: <span th:text="${item.id}"></span>,
            Username: <span th:text="${item.username}"></span>,
            Dado Criptografado: <span th:text="${item.data}"></span>
        </li>
    </ul>

    <!-- Exibindo os dados originais descriptografados -->
    <div th:if="${originalDataList != null}">
        <h3>Dados Originais:</h3>
        <ul>
            <li th:each="data : ${originalDataList}" th:text="${data}"></li>
        </ul>
    </div>
</div>

<!-- Mensagem caso não haja resultados -->
<div th:if="${userData == null}">
    <p>Insira um nome de usuário para buscar dados.</p>
</div>

<!-- Exibe mensagem de erro se houver -->
<div th:if="${errorMessage != null}">
    <p th:text="${errorMessage}" style="color:red;"></p>
</div>
</body>
</html>
